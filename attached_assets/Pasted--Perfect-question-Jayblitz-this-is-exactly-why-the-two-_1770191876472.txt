☕ Perfect question, Jayblitz — this is exactly why the two-way live support feels seamless in apps like Genius Terminal. Users chat in-app, agents see everything in real time, and everything stays encrypted/private.

We’ve already built the **user side** (Barista AI → escalation → live thread). Now let’s build the **agent side** so your support team (Mark, Jax, etc.) can actually see messages, reply instantly, and handle multiple users — just like the Genius screenshot.

### How the Two-Way Flow Works (Simple & Secure)
1. User escalates from Barista → creates/joins a support thread (XMTP conversation).
2. Thread is addressed to a **dedicated support inbox** (a special wallet address, e.g. `support.monday.trade`).
3. Agents connect to the **same inbox** from their dashboard → see all threads in one place.
4. Real-time: New messages appear instantly for both sides (end-to-end encrypted).

This matches Genius exactly: list of chats with previews → click to open thread → type & send.

### Best Option for Your Setup: XMTP + Lightweight Agent Dashboard
XMTP is perfect here (web3-native, no server spam, free). We’ll add a small **Agent Dashboard** (separate React page or tab in your existing app).

Two easy paths (we’ll pick the simplest first):

**Option A – Quickest (Recommended for MVP)**  
Use XMTP’s official inbox (`xmtp.chat`) for agents + a tiny custom dashboard for nicer UX.  
Agents just connect their wallet (or a shared support wallet) and see all support conversations.

**Option B – Full Custom Dashboard** (professional, like Genius)  
Build one React page inside your repo that lists threads, shows live messages, typing indicators, etc.  
This is what we’ll code below — it reuses your existing components.

### Agent Dashboard Code (Add to Your Repo)
Create `client/components/AgentDashboard.jsx` (copy-paste ready):

```jsx
import { useState, useEffect, useRef } from 'react';
import { Client } from '@xmtp/xmtp-js';
import { motion } from 'framer-motion';
import { Send, MessageCircle, Users } from 'lucide-react';

const SUPPORT_INBOX_ADDRESS = '0xYourSupportWalletHere'; // ← Change to your dedicated support wallet

const AgentDashboard = () => {
  const [client, setClient] = useState(null);
  const [threads, setThreads] = useState([]);           // List like Genius screenshot
  const [activeThread, setActiveThread] = useState(null);
  const [messages, setMessages] = useState([]);
  const [input, setInput] = useState('');
  const [isConnected, setIsConnected] = useState(false);

  // 1. Connect as support agent
  useEffect(() => {
    const connectAgent = async () => {
      // Use MetaMask / WalletConnect signer (same as user side)
      const signer = window.ethereum ? /* your signer */ : null;
      const xmtpClient = await Client.create(signer, { env: 'production' });
      setClient(xmtpClient);
      setIsConnected(true);

      // Load all conversations addressed to support inbox
      const convos = await xmtpClient.conversations.list();
      setThreads(convos.map(c => ({
        id: c.topic,
        agent: c.peerAddress.slice(0,6) + '...', // or map to nice names
        preview: c.messages?.[c.messages.length-1]?.content || 'New message',
        time: new Date(c.createdAt).toLocaleDateString(),
        convo: c
      })));
    };
    connectAgent();
  }, []);

  // 2. Open a thread & stream messages
  const openThread = async (thread) => {
    setActiveThread(thread);
    const stream = await thread.convo.streamMessages();
    setMessages([]);

    for await (const msg of stream) {
      setMessages(prev => [...prev, {
        text: msg.content,
        isUser: msg.senderAddress !== SUPPORT_INBOX_ADDRESS,
        time: msg.sent
      }]);
    }
  };

  // 3. Send reply
  const sendReply = async () => {
    if (!activeThread || !input) return;
    await activeThread.convo.send(input);
    setMessages(prev => [...prev, { text: input, isUser: false }]);
    setInput('');
  };

  return (
    <div className="h-screen flex bg-[#FDF8F3] dark:bg-[#2B2520] text-gray-900 dark:text-white">
      {/* Sidebar - Threads list (exactly like Genius) */}
      <div className="w-96 border-r border-[#E5DDD5] flex flex-col">
        <div className="p-4 border-b flex items-center justify-between">
          <h2 className="font-semibold text-xl flex items-center gap-2">
            <Users size={24} /> Support Inbox
          </h2>
          {isConnected && <div className="text-green-500 text-sm">● Online</div>}
        </div>

        <div className="flex-1 overflow-y-auto p-3 space-y-2">
          {threads.map(t => (
            <div
              key={t.id}
              onClick={() => openThread(t)}
              className={`p-3 rounded-2xl cursor-pointer hover:bg-white dark:hover:bg-gray-800 transition-all ${activeThread?.id === t.id ? 'bg-white dark:bg-gray-800 shadow' : ''}`}
            >
              <div className="flex gap-3">
                <div className="w-10 h-10 rounded-full bg-gradient-to-br from-[#C4622D] to-[#E8A87C] flex items-center justify-center text-white font-bold">
                  {t.agent[0]}
                </div>
                <div className="flex-1 min-w-0">
                  <div className="font-medium">Chat with {t.agent}</div>
                  <div className="text-sm text-gray-500 truncate">{t.preview}</div>
                </div>
                <div className="text-xs text-gray-400 whitespace-nowrap">{t.time}</div>
              </div>
            </div>
          ))}
        </div>

        <div className="p-4 border-t">
          <button className="w-full py-3 bg-[#C4622D] text-white rounded-2xl font-medium flex items-center justify-center gap-2">
            New Support Thread
          </button>
        </div>
      </div>

      {/* Main Chat Area */}
      {activeThread ? (
        <div className="flex-1 flex flex-col">
          {/* Header */}
          <div className="p-4 border-b flex items-center gap-3 bg-white dark:bg-gray-900">
            <div className="w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-500" />
            <div>
              <div className="font-semibold">Chat with User {activeThread.agent}</div>
              <div className="text-green-500 text-xs flex items-center gap-1">
                ● Online now
              </div>
            </div>
          </div>

          {/* Messages */}
          <div className="flex-1 overflow-y-auto p-6 space-y-6 bg-[#FEFDFB] dark:bg-[#2B2520]">
            {messages.map((m, i) => (
              <motion.div
                key={i}
                initial={{ opacity: 0, y: 10 }}
                animate={{ opacity: 1, y: 0 }}
                className={`flex ${m.isUser ? 'justify-start' : 'justify-end'}`}
              >
                <div className={`max-w-[70%] px-5 py-3 rounded-3xl ${m.isUser ? 'bg-white dark:bg-gray-800' : 'bg-[#C4622D] text-white'}`}>
                  {m.text}
                </div>
              </motion.div>
            ))}
          </div>

          {/* Input */}
          <div className="p-4 border-t bg-white dark:bg-gray-900">
            <div className="flex gap-3">
              <input
                value={input}
                onChange={e => setInput(e.target.value)}
                onKeyDown={e => e.key === 'Enter' && sendReply()}
                className="flex-1 px-6 py-4 rounded-3xl border border-gray-200 dark:border-gray-700 focus:outline-none focus:border-[#C4622D]"
                placeholder="Reply to user..."
              />
              <button
                onClick={sendReply}
                className="bg-[#C4622D] text-white w-14 h-14 rounded-3xl flex items-center justify-center hover:scale-105 transition-transform"
              >
                <Send size={24} />
              </button>
            </div>
          </div>
        </div>
      ) : (
        <div className="flex-1 flex items-center justify-center text-gray-400">
          Select a conversation to start helping ☕
        </div>
      )}
    </div>
  );
};

export default AgentDashboard;
```

### How to Deploy the Agent Dashboard
- Add a route `/agent` or `/support` (protected by wallet connect — only support wallets allowed).
- Agents open `yourapp.com/agent`, connect their wallet, and instantly see every active support thread.
- You can host it on the same Vercel/Replit as the main app.

### Bonus: Auto-Escalation from Barista
In your existing `sendMessage` function, add:
```js
if (text.toLowerCase().includes('human') || text.toLowerCase().includes('support') || confidence < 0.6) {
  // Create XMTP conversation with support inbox
  const convo = await xmtpClient.conversations.newConversation(SUPPORT_INBOX_ADDRESS);
  await convo.send(`Escalated from Barista: ${text}\n\nFull history: ${JSON.stringify(history)}`);
  setShowLiveSupport(true);
}
```

### Next Steps (We Can Do This in One Sitting)
1. Add the AgentDashboard.jsx to your repo.
2. Create a dedicated support wallet (or use a team shared one).
3. Test: One person as user, one as agent — messages appear instantly both ways.
4. (Optional) Add notifications (email/Slack) when a new thread starts.

This gives you exactly the Genius Terminal experience, but fully decentralized and branded with Monday Trade’s coffee vibe.

Questions for you so we nail it:
- How many support agents will you have?
- Do they already have wallets they can use for XMTP?
- Do you have an admin panel already, or should the dashboard be a separate page?
- Want to start with XMTP or a simpler Socket.io internal dashboard first?

Let’s ship the two-way live support this week — your traders will love it! ☕ What do you think?